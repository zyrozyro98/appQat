<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ·Ø¨ÙŠÙ‚ Ù‚Ø§Øª - Ù…Ù†ØµØ© Ø¨ÙŠØ¹ ÙˆØªÙˆØµÙŠÙ„ Ø§Ù„Ù‚Ø§Øª</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2E7D32;
            --primary-dark: #1B5E20;
            --primary-light: #4CAF50;
            --secondary: #FF9800;
            --secondary-dark: #F57C00;
            --accent: #2196F3;
            --danger: #F44336;
            --warning: #FFC107;
            --success: #4CAF50;
            --dark: #333333;
            --light: #F5F5F5;
            --white: #FFFFFF;
            --gray: #757575;
            --border: #E0E0E0;
            --card-shadow: 0 2px 10px rgba(0,0,0,0.1);
            --hover-shadow: 0 5px 20px rgba(0,0,0,0.15);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Tahoma', 'Geneva', 'Verdana', sans-serif;
        }

        body {
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background: var(--white);
            box-shadow: var(--card-shadow);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary);
            text-decoration: none;
        }

        .logo i {
            font-size: 1.8rem;
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 1.5rem;
        }

        .nav-menu a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .nav-menu a:hover, .nav-menu a.active {
            background: rgba(46, 125, 50, 0.1);
            color: var(--primary);
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .btn {
            padding: 0.6rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 0.95rem;
        }

        .btn i {
            font-size: 1.1rem;
        }

        .btn-primary {
            background: var(--primary);
            color: var(--white);
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: var(--secondary);
            color: var(--white);
        }

        .btn-secondary:hover {
            background: var(--secondary-dark);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background: var(--primary);
            color: var(--white);
        }

        .btn-danger {
            background: var(--danger);
            color: var(--white);
        }

        .btn-danger:hover {
            background: #d32f2f;
        }

        .btn-small {
            padding: 0.4rem 1rem;
            font-size: 0.85rem;
        }

        .btn-block {
            width: 100%;
        }

        .badge {
            background: var(--danger);
            color: white;
            padding: 0.2rem 0.6rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        /* Main Content */
        .main-content {
            margin-top: 80px;
            min-height: calc(100vh - 200px);
        }

        /* Auth Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: var(--white);
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        .modal-header {
            padding: 1.5rem 1.5rem 1rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            color: var(--primary);
            font-size: 1.5rem;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray);
        }

        .modal-body {
            padding: 1.5rem;
        }

        .form-group {
            margin-bottom: 1.2rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--dark);
        }

        .form-control {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 1rem;
            transition: border 0.3s;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(46, 125, 50, 0.2);
        }

        .form-select {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 1rem;
            background: var(--white);
            cursor: pointer;
        }

        .form-check {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .form-check-input {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        /* Dashboard */
        .dashboard {
            display: none;
        }

        .dashboard-header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 2rem;
            border-radius: 12px;
            margin-bottom: 2rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: var(--white);
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: var(--card-shadow);
            text-align: center;
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--hover-shadow);
        }

        .stat-icon {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .stat-title {
            color: var(--gray);
            font-size: 0.9rem;
        }

        /* Products */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .product-card {
            background: var(--white);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
            transition: all 0.3s;
            position: relative;
        }

        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--hover-shadow);
        }

        .product-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            background: var(--secondary);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            z-index: 1;
        }

        .product-image {
            height: 200px;
            background: linear-gradient(45deg, #e8f5e9, #c8e6c9);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            color: var(--primary);
        }

        .product-info {
            padding: 1.5rem;
        }

        .product-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--dark);
        }

        .product-description {
            color: var(--gray);
            font-size: 0.95rem;
            margin-bottom: 1rem;
            line-height: 1.5;
        }

        .product-price {
            font-size: 1.3rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .product-seller {
            color: var(--gray);
            font-size: 0.9rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .product-rating {
            color: var(--warning);
            margin-bottom: 1rem;
        }

        /* Orders */
        .orders-table {
            background: var(--white);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
            margin-bottom: 2rem;
        }

        .order-row {
            display: grid;
            grid-template-columns: 100px 1fr 1fr 1fr 120px;
            gap: 1rem;
            padding: 1.2rem;
            border-bottom: 1px solid var(--border);
            align-items: center;
        }

        .order-header {
            background: var(--primary);
            color: white;
            font-weight: 600;
        }

        .order-status {
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
            text-align: center;
        }

        .status-pending { background: #fff3cd; color: #856404; }
        .status-confirmed { background: #d1ecf1; color: #0c5460; }
        .status-washing { background: #d4edda; color: #155724; }
        .status-delivering { background: #cce5ff; color: #004085; }
        .status-delivered { background: var(--success); color: white; }
        .status-cancelled { background: #f8d7da; color: #721c24; }

        /* Cart */
        .cart-sidebar {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100vh;
            background: var(--white);
            box-shadow: -5px 0 20px rgba(0,0,0,0.1);
            z-index: 3000;
            transition: right 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .cart-sidebar.active {
            right: 0;
        }

        .cart-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cart-items {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
        }

        .cart-item {
            display: flex;
            gap: 1rem;
            padding: 1rem;
            border-bottom: 1px solid var(--border);
        }

        .cart-item-image {
            width: 80px;
            height: 80px;
            background: var(--light);
            border-radius: 8px;
        }

        .cart-footer {
            padding: 1.5rem;
            border-top: 1px solid var(--border);
        }

        /* Admin Panel */
        .admin-panel {
            display: none;
        }

        .admin-sidebar {
            position: fixed;
            left: 0;
            top: 80px;
            width: 250px;
            height: calc(100vh - 80px);
            background: var(--dark);
            color: white;
            padding: 1.5rem 0;
        }

        .admin-menu {
            list-style: none;
        }

        .admin-menu li a {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 1rem 1.5rem;
            color: white;
            text-decoration: none;
            transition: background 0.3s;
        }

        .admin-menu li a:hover, .admin-menu li a.active {
            background: rgba(255,255,255,0.1);
        }

        .admin-content {
            margin-right: 250px;
            padding: 2rem;
        }

        /* Alerts */
        .alert {
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .alert-warning {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }

        /* Tabs */
        .tabs {
            display: flex;
            border-bottom: 2px solid var(--border);
            margin-bottom: 2rem;
        }

        .tab {
            padding: 1rem 2rem;
            cursor: pointer;
            font-weight: 500;
            border-bottom: 2px solid transparent;
            margin-bottom: -2px;
        }

        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        /* Responsive */
        @media (max-width: 992px) {
            .admin-sidebar {
                width: 200px;
            }
            
            .admin-content {
                margin-right: 200px;
            }
            
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }
            
            .nav-menu {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .admin-sidebar {
                position: static;
                width: 100%;
                height: auto;
            }
            
            .admin-content {
                margin-right: 0;
            }
            
            .order-row {
                grid-template-columns: 1fr;
                text-align: center;
            }
            
            .cart-sidebar {
                width: 100%;
                right: -100%;
            }
            
            .stats-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <a href="#" class="logo" onclick="showSection('home'); return false;">
                    <i class="fas fa-leaf"></i>
                    <span>ØªØ·Ø¨ÙŠÙ‚ Ù‚Ø§Øª</span>
                </a>

                <ul class="nav-menu">
                    <li><a href="#" onclick="showSection('home'); return false;" class="active">
                        <i class="fas fa-home"></i> Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                    </a></li>
                    <li><a href="#" onclick="showSection('products'); return false;">
                        <i class="fas fa-store"></i> Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
                    </a></li>
                    <li><a href="#" onclick="showSection('markets'); return false;">
                        <i class="fas fa-shopping-cart"></i> Ø§Ù„Ø£Ø³ÙˆØ§Ù‚
                    </a></li>
                    <li><a href="#" onclick="showSection('washers'); return false;">
                        <i class="fas fa-soap"></i> Ù…ØºØ§Ø³Ù„ Ø§Ù„Ù‚Ø§Øª
                    </a></li>
                    <li><a href="#" onclick="showSection('packages'); return false;">
                        <i class="fas fa-gift"></i> Ø§Ù„Ø¨Ø§Ù‚Ø§Øª Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†ÙŠØ©
                    </a></li>
                </ul>

                <div class="header-actions">
                    <button class="btn btn-outline" onclick="toggleCart()">
                        <i class="fas fa-shopping-cart"></i>
                        <span id="cartCount">0</span>
                    </button>
                    <div id="userMenu">
                        <button class="btn btn-primary" onclick="showAuthModal()">
                            <i class="fas fa-user"></i> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Cart Sidebar -->
    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h3><i class="fas fa-shopping-cart"></i> Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚</h3>
            <button class="close-modal" onclick="toggleCart()">&times;</button>
        </div>
        <div class="cart-items" id="cartItems">
            <!-- Cart items will be loaded here -->
        </div>
        <div class="cart-footer">
            <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                <span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹:</span>
                <span id="cartTotal">0 Ø±ÙŠØ§Ù„</span>
            </div>
            <button class="btn btn-primary btn-block" onclick="checkout()">
                <i class="fas fa-check"></i> Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø´Ø±Ø§Ø¡
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Home Section -->
            <section id="home-section">
                <div class="dashboard-header">
                    <h1>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ ØªØ·Ø¨ÙŠÙ‚ Ù‚Ø§Øª</h1>
                    <p>Ù…Ù†ØµØ© Ù…ØªÙƒØ§Ù…Ù„Ø© Ù„Ø¨ÙŠØ¹ ÙˆØªÙˆØµÙŠÙ„ Ø§Ù„Ù‚Ø§Øª - Ø£Ø¶Ù ØºØ³ÙŠÙ„ Ø§Ù„Ù‚Ø§Øª Ù…Ù‚Ø§Ø¨Ù„ 100 Ø±ÙŠØ§Ù„ Ø¥Ø¶Ø§ÙÙŠØ©</p>
                </div>

                <!-- Advertisements -->
                <div id="advertisements" style="margin-bottom: 2rem;">
                    <!-- Ads will be loaded here -->
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-box"></i></div>
                        <div class="stat-number" id="totalProducts">0</div>
                        <div class="stat-title">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-store"></i></div>
                        <div class="stat-number" id="totalSellers">0</div>
                        <div class="stat-title">Ø§Ù„Ø¨Ø§Ø¦Ø¹ÙˆÙ†</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-truck"></i></div>
                        <div class="stat-number" id="totalDrivers">0</div>
                        <div class="stat-title">Ù…Ù†Ø¯ÙˆØ¨Ùˆ Ø§Ù„ØªÙˆØµÙŠÙ„</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-bath"></i></div>
                        <div class="stat-number" id="totalWashers">0</div>
                        <div class="stat-title">Ù…ØºØ§Ø³Ù„ Ø§Ù„Ù‚Ø§Øª</div>
                    </div>
                </div>

                <!-- Featured Products -->
                <h2 style="margin: 2rem 0 1rem;">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ù…ÙŠØ²Ø©</h2>
                <div class="products-grid" id="featuredProducts">
                    <!-- Featured products will be loaded here -->
                </div>
            </section>

            <!-- Products Section -->
            <section id="products-section" style="display: none;">
                <div class="dashboard-header">
                    <h2>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h2>
                    <div style="display: flex; gap: 1rem;">
                        <select class="form-select" style="width: 200px;" id="productFilter">
                            <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØ¦Ø§Øª</option>
                            <option value="premium">Ù…Ù…ØªØ§Ø²</option>
                            <option value="medium">Ù…ØªÙˆØ³Ø·</option>
                            <option value="economy">Ø§Ù‚ØªØµØ§Ø¯ÙŠ</option>
                        </select>
                        <button class="btn btn-primary" onclick="showAddProductForm()">
                            <i class="fas fa-plus"></i> Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬
                        </button>
                    </div>
                </div>
                <div class="products-grid" id="productsContainer">
                    <!-- All products will be loaded here -->
                </div>
            </section>

            <!-- Admin Panel -->
            <section id="admin-section" style="display: none;">
                <div class="admin-sidebar">
                    <ul class="admin-menu">
                        <li><a href="#" onclick="showAdminTab('dashboard'); return false;" class="active">
                            <i class="fas fa-tachometer-alt"></i> Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
                        </a></li>
                        <li><a href="#" onclick="showAdminTab('markets'); return false;">
                            <i class="fas fa-store"></i> Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø³ÙˆØ§Ù‚
                        </a></li>
                        <li><a href="#" onclick="showAdminTab('washers'); return false;">
                            <i class="fas fa-soap"></i> Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ØºØ§Ø³Ù„
                        </a></li>
                        <li><a href="#" onclick="showAdminTab('drivers'); return false;">
                            <i class="fas fa-truck"></i> Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ÙŠÙ†
                        </a></li>
                        <li><a href="#" onclick="showAdminTab('advertisements'); return false;">
                            <i class="fas fa-bullhorn"></i> Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª
                        </a></li>
                        <li><a href="#" onclick="showAdminTab('packages'); return false;">
                            <i class="fas fa-gift"></i> Ø§Ù„Ø¨Ø§Ù‚Ø§Øª
                        </a></li>
                        <li><a href="#" onclick="showAdminTab('users'); return false;">
                            <i class="fas fa-users"></i> Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
                        </a></li>
                        <li><a href="#" onclick="showAdminTab('reports'); return false;">
                            <i class="fas fa-chart-bar"></i> Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±
                        </a></li>
                        <li><a href="#" onclick="showAdminTab('settings'); return false;">
                            <i class="fas fa-cog"></i> Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
                        </a></li>
                    </ul>
                </div>
                <div class="admin-content" id="adminContent">
                    <!-- Admin content will be loaded here -->
                </div>
            </section>
        </div>
    </main>

    <!-- Auth Modal -->
    <div class="modal" id="authModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="authTitle">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
                <button class="close-modal" onclick="hideAuthModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="loginForm">
                    <div class="form-group">
                        <label class="form-label">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                        <input type="email" class="form-control" id="loginEmail" placeholder="Ø§Ø¯Ø®Ù„ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                        <input type="password" class="form-control" id="loginPassword" placeholder="Ø§Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
                    </div>
                    <button class="btn btn-primary btn-block" onclick="login()">
                        <i class="fas fa-sign-in-alt"></i> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
                    </button>
                    <div style="text-align: center; margin-top: 1rem;">
                        <a href="#" onclick="showRegisterForm()" style="color: var(--primary); text-decoration: none;">
                            Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯
                        </a>
                    </div>
                </div>

                <div id="registerForm" style="display: none;">
                    <div class="form-group">
                        <label class="form-label">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
                        <input type="text" class="form-control" id="regName" placeholder="Ø§Ø¯Ø®Ù„ Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                        <input type="email" class="form-control" id="regEmail" placeholder="Ø§Ø¯Ø®Ù„ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
                        <input type="tel" class="form-control" id="regPhone" placeholder="Ù…Ø«Ø§Ù„: 771234567">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
                        <select class="form-select" id="userType" onchange="toggleUserFields()">
                            <option value="buyer">Ù…Ø´ØªØ±ÙŠ</option>
                            <option value="seller">Ø¨Ø§Ø¦Ø¹</option>
                            <option value="driver">Ù…Ù†Ø¯ÙˆØ¨ ØªÙˆØµÙŠÙ„</option>
                        </select>
                    </div>
                    <div class="form-group" id="storeField" style="display: none;">
                        <label class="form-label">Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø±</label>
                        <input type="text" class="form-control" id="storeName" placeholder="Ø§Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø±">
                    </div>
                    <div class="form-group" id="vehicleField" style="display: none;">
                        <label class="form-label">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø±ÙƒØ¨Ø©</label>
                        <select class="form-select" id="vehicleType">
                            <option value="motorcycle">Ø¯Ø±Ø§Ø¬Ø© Ù†Ø§Ø±ÙŠØ©</option>
                            <option value="car">Ø³ÙŠØ§Ø±Ø©</option>
                            <option value="truck">Ø´Ø§Ø­Ù†Ø© ØµØºÙŠØ±Ø©</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                        <input type="password" class="form-control" id="regPassword" placeholder="Ø§Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ù‚ÙˆÙŠØ©">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                        <input type="password" class="form-control" id="regConfirmPassword" placeholder="Ø£Ø¹Ø¯ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
                    </div>
                    <button class="btn btn-primary btn-block" onclick="register()">
                        <i class="fas fa-user-plus"></i> Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨
                    </button>
                    <div style="text-align: center; margin-top: 1rem;">
                        <a href="#" onclick="showLoginForm()" style="color: var(--primary); text-decoration: none;">
                            Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ Ø¨Ø§Ù„ÙØ¹Ù„ØŸ Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Checkout Modal -->
    <div class="modal" id="checkoutModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Ø¥ØªÙ…Ø§Ù… Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø´Ø±Ø§Ø¡</h2>
                <button class="close-modal" onclick="hideCheckoutModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙˆØµÙŠÙ„</label>
                    <textarea class="form-control" id="deliveryAddress" rows="3" placeholder="Ø§Ø¯Ø®Ù„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙˆØµÙŠÙ„ Ø§Ù„ÙƒØ§Ù…Ù„"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Ø®ÙŠØ§Ø± ØºØ³Ù„ Ø§Ù„Ù‚Ø§Øª</label>
                    <div class="form-check">
                        <input type="checkbox" class="form-check-input" id="washingOption" onchange="toggleWashingPrice()">
                        <label class="form-label" for="washingOption">Ø£Ø±ÙŠØ¯ ØºØ³Ù„ Ø§Ù„Ù‚Ø§Øª (+100 Ø±ÙŠØ§Ù„)</label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</label>
                    <select class="form-select" id="paymentMethod">
                        <option value="balance">Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø³Ø§Ø¨</option>
                        <option value="jib">Ù…Ø­ÙØ¸Ø© Ø¬ÙŠØ¨ (771831482)</option>
                        <option value="jawaly">Ù…Ø­ÙØ¸Ø© Ø¬ÙˆØ§Ù„ÙŠ (771831482)</option>
                        <option value="mobile_money">Ù…Ø­ÙØ¸Ø© Ù…ÙˆØ¨Ø§ÙŠÙ„ Ù…ÙˆÙ†ÙŠ</option>
                        <option value="shamel_money">Ù…Ø­ÙØ¸Ø© Ø§Ù„Ø´Ø§Ù…Ù„ Ù…ÙˆÙ†ÙŠ</option>
                        <option value="flousk">Ù…Ø­ÙØ¸Ø© ÙÙ„ÙˆØ³Ùƒ</option>
                    </select>
                </div>
                
                <div id="externalPaymentInfo" style="display: none; margin-bottom: 1rem;">
                    <div class="alert alert-warning">
                        <i class="fas fa-info-circle"></i>
                        <span>ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰: ÙŠÙˆØ³Ù Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ Ø­Ù…ÙˆØ¯ Ø²Ù‡ÙŠØ± - 771831482 Ø«Ù… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</span>
                    </div>
                </div>
                
                <div style="background: var(--light); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                        <span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹:</span>
                        <span id="checkoutSubtotal">0 Ø±ÙŠØ§Ù„</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                        <span>ØºØ³ÙŠÙ„ Ø§Ù„Ù‚Ø§Øª:</span>
                        <span id="washingPrice">0 Ø±ÙŠØ§Ù„</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 1.2rem;">
                        <span>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</span>
                        <span id="checkoutTotal">0 Ø±ÙŠØ§Ù„</span>
                    </div>
                </div>
                
                <button class="btn btn-primary btn-block" onclick="confirmOrder()">
                    <i class="fas fa-check-circle"></i> ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨
                </button>
            </div>
        </div>
    </div>

    <!-- Wallet Modal -->
    <div class="modal" id="walletModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Ø§Ù„Ù…Ø­ÙØ¸Ø© ÙˆØ§Ù„Ø´Ø­Ù†</h2>
                <button class="close-modal" onclick="hideWalletModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="tabs">
                    <div class="tab active" onclick="showWalletTab('balance')">Ø§Ù„Ø±ØµÙŠØ¯</div>
                    <div class="tab" onclick="showWalletTab('charge')">Ø´Ø­Ù† Ø§Ù„Ø±ØµÙŠØ¯</div>
                    <div class="tab" onclick="showWalletTab('withdraw')">Ø³Ø­Ø¨ Ø§Ù„Ø±ØµÙŠØ¯</div>
                </div>
                
                <div id="balanceTab">
                    <div style="background: linear-gradient(135deg, var(--primary), var(--primary-dark)); color: white; padding: 1.5rem; border-radius: 10px; text-align: center; margin-bottom: 1.5rem;">
                        <h3 style="margin-bottom: 0.5rem;">Ø±ØµÙŠØ¯Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ</h3>
                        <div style="font-size: 2.5rem; font-weight: bold;" id="currentBalance">0 Ø±ÙŠØ§Ù„</div>
                    </div>
                    
                    <div style="margin-bottom: 1.5rem;">
                        <h4 style="margin-bottom: 1rem;">Ø§Ù„Ù…Ø­Ø§ÙØ¸ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</h4>
                        <div class="stats-grid" id="walletsList">
                            <!-- Wallets will be loaded here -->
                        </div>
                    </div>
                </div>
                
                <div id="chargeTab" style="display: none;">
                    <div class="form-group">
                        <label class="form-label">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø´Ø­Ù†</label>
                        <select class="form-select" id="chargeMethod" onchange="toggleChargeInfo()">
                            <option value="transfer">ØªØ­ÙˆÙŠÙ„ Ø¨Ù†ÙƒÙŠ</option>
                            <option value="jib">Ù…Ø­ÙØ¸Ø© Ø¬ÙŠØ¨</option>
                            <option value="jawaly">Ù…Ø­ÙØ¸Ø© Ø¬ÙˆØ§Ù„ÙŠ</option>
                            <option value="mobile_money">Ù…Ø­ÙØ¸Ø© Ù…ÙˆØ¨Ø§ÙŠÙ„ Ù…ÙˆÙ†ÙŠ</option>
                            <option value="shamel_money">Ù…Ø­ÙØ¸Ø© Ø§Ù„Ø´Ø§Ù…Ù„ Ù…ÙˆÙ†ÙŠ</option>
                            <option value="flousk">Ù…Ø­ÙØ¸Ø© ÙÙ„ÙˆØ³Ùƒ</option>
                            <option value="gift">ÙƒÙˆØ¯ Ù‡Ø¯ÙŠØ©</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Ø§Ù„Ù…Ø¨Ù„Øº (Ø±ÙŠØ§Ù„)</label>
                        <input type="number" class="form-control" id="chargeAmount" placeholder="Ø§Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù„Øº">
                    </div>
                    
                    <div id="transferInfo" style="margin-bottom: 1rem;">
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle"></i>
                            <span>ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰: ÙŠÙˆØ³Ù Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ Ø­Ù…ÙˆØ¯ Ø²Ù‡ÙŠØ± - 771831482</span>
                        </div>
                    </div>
                    
                    <div id="giftCodeField" style="display: none;">
                        <div class="form-group">
                            <label class="form-label">ÙƒÙˆØ¯ Ø§Ù„Ù‡Ø¯ÙŠØ©</label>
                            <input type="text" class="form-control" id="giftCode" placeholder="Ø§Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„Ù‡Ø¯ÙŠØ©">
                        </div>
                    </div>
                    
                    <button class="btn btn-primary btn-block" onclick="chargeWallet()">
                        <i class="fas fa-coins"></i> Ø´Ø­Ù† Ø§Ù„Ø±ØµÙŠØ¯
                    </button>
                </div>
                
                <div id="withdrawTab" style="display: none;">
                    <div class="alert alert-warning">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span>Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø³Ø­Ø¨: 50 Ø±ÙŠØ§Ù„</span>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Ø§Ù„Ù…Ø¨Ù„Øº (Ø±ÙŠØ§Ù„)</label>
                        <input type="number" class="form-control" id="withdrawAmount" placeholder="Ø§Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù„Øº">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø­ÙØ¸Ø©</label>
                        <select class="form-select" id="withdrawWalletType">
                            <option value="jib">Ù…Ø­ÙØ¸Ø© Ø¬ÙŠØ¨</option>
                            <option value="jawaly">Ù…Ø­ÙØ¸Ø© Ø¬ÙˆØ§Ù„ÙŠ</option>
                            <option value="mobile_money">Ù…Ø­ÙØ¸Ø© Ù…ÙˆØ¨Ø§ÙŠÙ„ Ù…ÙˆÙ†ÙŠ</option>
                            <option value="shamel_money">Ù…Ø­ÙØ¸Ø© Ø§Ù„Ø´Ø§Ù…Ù„ Ù…ÙˆÙ†ÙŠ</option>
                            <option value="flousk">Ù…Ø­ÙØ¸Ø© ÙÙ„ÙˆØ³Ùƒ</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
                        <input type="tel" class="form-control" id="withdrawPhone" placeholder="Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø§Ù„Ù…Ø­ÙØ¸Ø©">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
                        <input type="text" class="form-control" id="withdrawName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ù…Ø³Ø¬Ù„ ÙÙŠ Ø§Ù„Ù…Ø­ÙØ¸Ø©">
                    </div>
                    
                    <button class="btn btn-secondary btn-block" onclick="withdrawBalance()">
                        <i class="fas fa-money-bill-wave"></i> Ø·Ù„Ø¨ Ø§Ù„Ø³Ø­Ø¨
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div class="modal" id="successModal">
        <div class="modal-content" style="max-width: 400px;">
            <div class="modal-body" style="text-align: center; padding: 2rem;">
                <div style="font-size: 4rem; color: var(--success); margin-bottom: 1rem;">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h3 id="successTitle">ØªÙ… Ø¨Ù†Ø¬Ø§Ø­!</h3>
                <p id="successMessage" style="margin-bottom: 2rem;"></p>
                <button class="btn btn-primary" onclick="hideSuccessModal()">Ù…ÙˆØ§ÙÙ‚</button>
            </div>
        </div>
    </div>

    <script>
        // Global state
        const state = {
            currentUser: null,
            token: null,
            userType: null,
            products: [],
            cart: [],
            markets: [],
            washers: [],
            drivers: [],
            advertisements: [],
            packages: [],
            notifications: [],
            orders: [],
            wallets: {
                balance: 0,
                jib: 0,
                jawaly: 0,
                mobile_money: 0,
                shamel_money: 0,
                flousk: 0
            }
        };

        // DOM Elements
        const authModal = document.getElementById('authModal');
        const checkoutModal = document.getElementById('checkoutModal');
        const walletModal = document.getElementById('walletModal');
        const successModal = document.getElementById('successModal');
        const cartSidebar = document.getElementById('cartSidebar');

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            checkAuthStatus();
            loadInitialData();
            updateCartCount();
            
            // Load initial section
            showSection('home');
        });

        // Check authentication status
        function checkAuthStatus() {
            const token = localStorage.getItem('token');
            const user = localStorage.getItem('user');
            
            if (token && user) {
                state.token = token;
                state.currentUser = JSON.parse(user);
                state.userType = state.currentUser.type;
                updateUI();
            }
        }

        // Update UI based on user role
        function updateUI() {
            const userMenu = document.getElementById('userMenu');
            const navMenu = document.querySelector('.nav-menu');
            
            if (state.currentUser) {
                // Update user menu
                userMenu.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <button class="btn btn-outline" onclick="showWalletModal()">
                            <i class="fas fa-wallet"></i>
                            <span id="userBalance">${state.wallets.balance} Ø±ÙŠØ§Ù„</span>
                        </button>
                        <div style="position: relative;">
                            <button class="btn btn-primary" onclick="toggleUserDropdown()">
                                <i class="fas fa-user"></i> ${state.currentUser.name}
                            </button>
                            <div id="userDropdown" style="display: none; position: absolute; top: 100%; left: 0; background: white; box-shadow: var(--card-shadow); border-radius: 8px; padding: 0.5rem; min-width: 200px; z-index: 1000;">
                                ${state.userType === 'admin' ? `
                                    <a href="#" onclick="showAdminPanel(); return false;" style="display: block; padding: 0.8rem; text-decoration: none; color: var(--dark); border-bottom: 1px solid var(--border);">
                                        <i class="fas fa-cog"></i> Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
                                    </a>
                                ` : ''}
                                ${state.userType === 'seller' ? `
                                    <a href="#" onclick="showSellerPanel(); return false;" style="display: block; padding: 0.8rem; text-decoration: none; color: var(--dark); border-bottom: 1px solid var(--border);">
                                        <i class="fas fa-store"></i> Ù„ÙˆØ­Ø© Ø§Ù„Ø¨Ø§Ø¦Ø¹
                                    </a>
                                ` : ''}
                                <a href="#" onclick="showSection('orders'); return false;" style="display: block; padding: 0.8rem; text-decoration: none; color: var(--dark); border-bottom: 1px solid var(--border);">
                                    <i class="fas fa-shopping-bag"></i> Ø·Ù„Ø¨Ø§ØªÙŠ
                                </a>
                                <a href="#" onclick="showNotifications(); return false;" style="display: block; padding: 0.8rem; text-decoration: none; color: var(--dark); border-bottom: 1px solid var(--border);">
                                    <i class="fas fa-bell"></i> Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
                                    <span class="badge" id="notificationCount">0</span>
                                </a>
                                <a href="#" onclick="logout()" style="display: block; padding: 0.8rem; text-decoration: none; color: var(--danger);">
                                    <i class="fas fa-sign-out-alt"></i> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
                                </a>
                            </div>
                        </div>
                    </div>
                `;
                
                // Update navigation based on user type
                if (state.userType === 'seller') {
                    navMenu.innerHTML += `
                        <li><a href="#" onclick="showSection('seller-products'); return false;">
                            <i class="fas fa-box"></i> Ù…Ù†ØªØ¬Ø§ØªÙŠ
                        </a></li>
                        <li><a href="#" onclick="showSection('seller-orders'); return false;">
                            <i class="fas fa-shopping-bag"></i> Ù…Ø¨ÙŠØ¹Ø§ØªÙŠ
                        </a></li>
                    `;
                }
                
                // Load user data
                loadUserData();
            }
        }

        // Toggle user dropdown
        function toggleUserDropdown() {
            const dropdown = document.getElementById('userDropdown');
            dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
        }

        // Show admin panel
        function showAdminPanel() {
            document.getElementById('home-section').style.display = 'none';
            document.getElementById('products-section').style.display = 'none';
            document.getElementById('admin-section').style.display = 'block';
            showAdminTab('dashboard');
        }

        // Show sections
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('section').forEach(section => {
                section.style.display = 'none';
            });
            
            // Show requested section
            document.getElementById(sectionId + '-section').style.display = 'block';
            
            // Update active nav
            document.querySelectorAll('.nav-menu a').forEach(link => {
                link.classList.remove('active');
            });
            
            // Load section data
            switch(sectionId) {
                case 'home':
                    loadHomeData();
                    break;
                case 'products':
                    loadProducts();
                    break;
                case 'markets':
                    loadMarkets();
                    break;
                case 'washers':
                    loadWashers();
                    break;
            }
        }

        // Load initial data
        function loadInitialData() {
            // Load sample data
            state.products = [
                {
                    id: 1,
                    name: "Ù‚Ø§Øª ÙŠÙ…Ù†ÙŠ Ù…Ù…ØªØ§Ø²",
                    description: "Ø£Ø¬ÙˆØ¯ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù‚Ø§Øª Ø§Ù„ÙŠÙ…Ù†ÙŠ Ù…Ù† Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ø²Ø§Ø±Ø¹ØŒ Ø·Ø§Ø²Ø¬ ÙˆÙ…ØºØ³ÙˆÙ„",
                    price: 45,
                    category: "premium",
                    seller: "Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø£Ø®Ø¶Ø±",
                    sellerRating: 4.8,
                    stock: 10,
                    image: "ğŸŒ¿",
                    marketId: 1,
                    hasWashing: true
                },
                {
                    id: 2,
                    name: "Ù‚Ø§Øª ØªØ¹Ø² Ø§Ù„ÙØ§Ø®Ø±",
                    description: "Ù…Ù† Ø£Ø´Ù‡Ø± Ù…Ø²Ø§Ø±Ø¹ ØªØ¹Ø² Ø¨Ø·Ø¹Ù… Ù…Ù…ÙŠØ² ÙˆØ¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ©",
                    price: 35,
                    category: "premium",
                    seller: "Ù…ÙˆØ±Ø¯ ØªØ¹Ø²",
                    sellerRating: 4.5,
                    stock: 15,
                    image: "ğŸƒ",
                    marketId: 2,
                    hasWashing: true
                },
                {
                    id: 3,
                    name: "Ù‚Ø§Øª Ø¹Ø¶ÙˆÙŠ Ø·Ø¨ÙŠØ¹ÙŠ",
                    description: "Ù…Ù†ØªØ¬ Ø¹Ø¶ÙˆÙŠ Ø®Ø§Ù„ÙŠ Ù…Ù† Ø§Ù„Ù…Ø¨ÙŠØ¯Ø§Øª Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠØ©",
                    price: 50,
                    category: "organic",
                    seller: "Ø§Ù„Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø¹Ø¶ÙˆÙŠØ©",
                    sellerRating: 4.9,
                    stock: 8,
                    image: "ğŸŒ±",
                    marketId: 1,
                    hasWashing: true
                },
                {
                    id: 4,
                    name: "Ù‚Ø§Øª Ø§Ù‚ØªØµØ§Ø¯ÙŠ",
                    description: "Ù†ÙˆØ¹ÙŠØ© Ø¬ÙŠØ¯Ø© Ø¨Ø³Ø¹Ø± Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ Ø§Ù„ÙŠÙˆÙ…ÙŠ",
                    price: 25,
                    category: "economy",
                    seller: "Ù…ØªØ¬Ø± Ø§Ù„Ù‚Ø§Øª",
                    sellerRating: 4.2,
                    stock: 20,
                    image: "ğŸ",
                    marketId: 3,
                    hasWashing: false
                }
            ];

            state.markets = [
                { id: 1, name: "Ø³ÙˆÙ‚ ØµÙ†Ø¹Ø§Ø¡ Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ", location: "ØµÙ†Ø¹Ø§Ø¡", washers: 3 },
                { id: 2, name: "Ø³ÙˆÙ‚ ØªØ¹Ø²", location: "ØªØ¹Ø²", washers: 2 },
                { id: 3, name: "Ø³ÙˆÙ‚ Ø§Ù„Ø­Ø¯ÙŠØ¯Ø©", location: "Ø§Ù„Ø­Ø¯ÙŠØ¯Ø©", washers: 2 }
            ];

            state.washers = [
                { id: 1, name: "Ù…ØºØ³Ù„Ø© Ø§Ù„Ù†Ø¸Ø§ÙØ©", marketId: 1, phone: "771234567" },
                { id: 2, name: "Ù…ØºØ³Ù„Ø© Ø§Ù„Ø£Ù…Ø§Ù†Ø©", marketId: 1, phone: "771234568" },
                { id: 3, name: "Ù…ØºØ³Ù„Ø© ØªØ¹Ø²", marketId: 2, phone: "771234569" }
            ];

            state.drivers = [
                { id: 1, name: "Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯", vehicle: "motorcycle", phone: "771234570", status: "available" },
                { id: 2, name: "Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ", vehicle: "car", phone: "771234571", status: "available" }
            ];

            state.advertisements = [
                { id: 1, title: "Ø¹Ø±ÙˆØ¶ Ø®Ø§ØµØ©", content: "Ø®ØµÙ… 20% Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹", type: "home" },
                { id: 2, title: "ØªÙˆØµÙŠÙ„ Ù…Ø¬Ø§Ù†ÙŠ", content: "ØªÙˆØµÙŠÙ„ Ù…Ø¬Ø§Ù†ÙŠ Ù„Ù„Ø·Ù„Ø¨Ø§Øª ÙÙˆÙ‚ 100 Ø±ÙŠØ§Ù„", type: "banner" }
            ];

            state.packages = [
                { id: 1, name: "Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©", price: 100, duration: 7, features: ["Ø¥Ø¹Ù„Ø§Ù† ÙÙŠ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"] },
                { id: 2, name: "Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ø°Ù‡Ø¨ÙŠØ©", price: 250, duration: 30, features: ["Ø¥Ø¹Ù„Ø§Ù† Ø±Ø¦ÙŠØ³ÙŠ", "ØªÙ…ÙŠØ² Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª"] }
            ];

            // Update stats
            updateStats();
        }

        // Load user data
        function loadUserData() {
            if (state.currentUser) {
                // Load user balance
                state.wallets.balance = Math.floor(Math.random() * 1000) + 100;
                document.getElementById('userBalance').textContent = state.wallets.balance + ' Ø±ÙŠØ§Ù„';
                
                // Load notifications
                state.notifications = [
                    { id: 1, title: "Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯", message: "Ù„Ø¯ÙŠÙƒ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ #1234", read: false, time: "Ù‚Ø¨Ù„ 5 Ø¯Ù‚Ø§Ø¦Ù‚" },
                    { id: 2, title: "Ø´Ø­Ù† Ù†Ø§Ø¬Ø­", message: "ØªÙ… Ø´Ø­Ù† Ø±ØµÙŠØ¯Ùƒ Ø¨Ù…Ø¨Ù„Øº 100 Ø±ÙŠØ§Ù„", read: false, time: "Ù‚Ø¨Ù„ Ø³Ø§Ø¹Ø©" }
                ];
                
                document.getElementById('notificationCount').textContent = state.notifications.filter(n => !n.read).length;
                
                // Load user orders
                state.orders = [
                    { id: 1234, date: "2024-01-15", amount: 145, status: "delivered", items: 2, washing: true },
                    { id: 1235, date: "2024-01-16", amount: 85, status: "delivering", items: 1, washing: false }
                ];
            }
        }

        // Update statistics
        function updateStats() {
            document.getElementById('totalProducts').textContent = state.products.length;
            document.getElementById('totalSellers').textContent = Math.floor(Math.random() * 50) + 20;
            document.getElementById('totalDrivers').textContent = state.drivers.length;
            document.getElementById('totalWashers').textContent = state.washers.length;
        }

        // Load home data
        function loadHomeData() {
            // Load advertisements
            const adsContainer = document.getElementById('advertisements');
            adsContainer.innerHTML = state.advertisements.map(ad => `
                <div style="background: linear-gradient(135deg, var(--secondary), var(--secondary-dark)); color: white; padding: 1.5rem; border-radius: 10px; margin-bottom: 1rem;">
                    <h3>${ad.title}</h3>
                    <p>${ad.content}</p>
                </div>
            `).join('');

            // Load featured products
            const featuredContainer = document.getElementById('featuredProducts');
            featuredContainer.innerHTML = state.products.slice(0, 4).map(product => `
                <div class="product-card">
                    ${product.category === 'premium' ? '<div class="product-badge">Ù…Ù…ØªØ§Ø²</div>' : ''}
                    <div class="product-image">${product.image}</div>
                    <div class="product-info">
                        <div class="product-title">${product.name}</div>
                        <div class="product-description">${product.description}</div>
                        <div class="product-seller">
                            <i class="fas fa-store"></i>
                            ${product.seller}
                        </div>
                        <div class="product-rating">
                            ${'â˜…'.repeat(Math.floor(product.sellerRating))}${'â˜†'.repeat(5 - Math.floor(product.sellerRating))}
                            <span style="color: var(--gray); margin-right: 5px;">(${product.sellerRating})</span>
                        </div>
                        <div class="product-price">${product.price} Ø±ÙŠØ§Ù„</div>
                        <div style="display: flex; gap: 0.5rem;">
                            <button class="btn btn-outline btn-small" onclick="viewProduct(${product.id})">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="btn btn-primary btn-small" onclick="addToCart(${product.id})">
                                <i class="fas fa-cart-plus"></i> Ø¥Ø¶Ø§ÙØ©
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Load products
        function loadProducts() {
            const container = document.getElementById('productsContainer');
            
            // Filter products if needed
            const filter = document.getElementById('productFilter').value;
            let filteredProducts = state.products;
            
            if (filter) {
                filteredProducts = state.products.filter(p => p.category === filter);
            }
            
            container.innerHTML = filteredProducts.map(product => `
                <div class="product-card">
                    ${product.category === 'premium' ? '<div class="product-badge">Ù…Ù…ØªØ§Ø²</div>' : ''}
                    <div class="product-image">${product.image}</div>
                    <div class="product-info">
                        <div class="product-title">${product.name}</div>
                        <div class="product-description">${product.description}</div>
                        <div class="product-seller">
                            <i class="fas fa-store"></i>
                            ${product.seller}
                        </div>
                        <div class="product-rating">
                            ${'â˜…'.repeat(Math.floor(product.sellerRating))}${'â˜†'.repeat(5 - Math.floor(product.sellerRating))}
                            <span style="color: var(--gray); margin-right: 5px;">(${product.sellerRating})</span>
                        </div>
                        <div class="product-price">${product.price} Ø±ÙŠØ§Ù„</div>
                        ${product.hasWashing ? '<div style="color: var(--success); margin-bottom: 1rem; font-size: 0.9rem;"><i class="fas fa-soap"></i> ÙŠØªÙˆÙØ± ØºØ³ÙŠÙ„ Ø§Ù„Ù‚Ø§Øª (+100 Ø±ÙŠØ§Ù„)</div>' : ''}
                        <div style="display: flex; gap: 0.5rem;">
                            <button class="btn btn-outline btn-small" onclick="viewProduct(${product.id})">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="btn btn-primary btn-small" onclick="addToCart(${product.id})">
                                <i class="fas fa-cart-plus"></i> Ø¥Ø¶Ø§ÙØ©
                            </button>
                            ${state.userType === 'seller' ? `
                                <button class="btn btn-secondary btn-small" onclick="editProduct(${product.id})">
                                    <i class="fas fa-edit"></i>
                                </button>
                            ` : ''}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // View product details
        function viewProduct(productId) {
            const product = state.products.find(p => p.id === productId);
            if (!product) return;
            
            // Show product details modal
            const modalContent = `
                <div style="text-align: center; padding: 2rem;">
                    <div style="font-size: 5rem; margin-bottom: 1rem;">${product.image}</div>
                    <h3 style="margin-bottom: 1rem;">${product.name}</h3>
                    <p style="margin-bottom: 1rem; color: var(--gray);">${product.description}</p>
                    <div style="background: var(--light); padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem;">
                        <div style="font-size: 2rem; color: var(--primary); font-weight: bold;">${product.price} Ø±ÙŠØ§Ù„</div>
                        ${product.hasWashing ? '<div style="color: var(--success); margin-top: 0.5rem;"><i class="fas fa-soap"></i> ÙŠØªÙˆÙØ± ØºØ³ÙŠÙ„ Ø§Ù„Ù‚Ø§Øª (+100 Ø±ÙŠØ§Ù„)</div>' : ''}
                    </div>
                    <div style="margin-bottom: 1.5rem; text-align: right;">
                        <div><strong>Ø§Ù„Ø¨Ø§Ø¦Ø¹:</strong> ${product.seller}</div>
                        <div><strong>Ø§Ù„ØªÙ‚ÙŠÙŠÙ…:</strong> ${product.sellerRating}/5</div>
                        <div><strong>Ø§Ù„Ù…Ø®Ø²ÙˆÙ†:</strong> ${product.stock} Ù‚Ø·Ø¹Ø©</div>
                    </div>
                    <button class="btn btn-primary" onclick="addToCart(${product.id}); hideSuccessModal();" style="margin-right: 0.5rem;">
                        <i class="fas fa-cart-plus"></i> Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©
                    </button>
                    <button class="btn btn-outline" onclick="hideSuccessModal()">
                        Ø¥ØºÙ„Ø§Ù‚
                    </button>
                </div>
            `;
            
            showSuccessModal('ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬', modalContent);
        }

        // Add to cart
        function addToCart(productId, quantity = 1) {
            if (!state.currentUser) {
                showAuthModal();
                return;
            }
            
            const product = state.products.find(p => p.id === productId);
            if (!product) return;
            
            const cartItem = state.cart.find(item => item.product.id === productId);
            if (cartItem) {
                cartItem.quantity += quantity;
            } else {
                state.cart.push({
                    product: product,
                    quantity: quantity,
                    washing: false
                });
            }
            
            updateCartCount();
            showSuccess('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©');
        }

        // Update cart count
        function updateCartCount() {
            const totalItems = state.cart.reduce((total, item) => total + item.quantity, 0);
            document.getElementById('cartCount').textContent = totalItems;
        }

        // Toggle cart sidebar
        function toggleCart() {
            if (!state.currentUser) {
                showAuthModal();
                return;
            }
            
            cartSidebar.classList.toggle('active');
            updateCartSidebar();
        }

        // Update cart sidebar
        function updateCartSidebar() {
            const container = document.getElementById('cartItems');
            const totalElement = document.getElementById('cartTotal');
            
            if (state.cart.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 3rem 1rem; color: var(--gray);">
                        <i class="fas fa-shopping-cart" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                        <p>Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚ ÙØ§Ø±ØºØ©</p>
                    </div>
                `;
                totalElement.textContent = '0 Ø±ÙŠØ§Ù„';
                return;
            }
            
            let total = 0;
            container.innerHTML = state.cart.map(item => {
                const itemTotal = item.product.price * item.quantity;
                total += itemTotal;
                
                return `
                    <div class="cart-item">
                        <div class="cart-item-image" style="display: flex; align-items: center; justify-content: center; font-size: 2rem;">
                            ${item.product.image}
                        </div>
                        <div style="flex: 1;">
                            <div style="font-weight: 600; margin-bottom: 0.5rem;">${item.product.name}</div>
                            <div style="color: var(--gray); margin-bottom: 0.5rem;">${item.product.price} Ã— ${item.quantity}</div>
                            <div style="display: flex; gap: 0.5rem;">
                                <button class="btn btn-outline btn-small" onclick="updateCartQuantity(${item.product.id}, -1)">
                                    <i class="fas fa-minus"></i>
                                </button>
                                <button class="btn btn-outline btn-small" onclick="updateCartQuantity(${item.product.id}, 1)">
                                    <i class="fas fa-plus"></i>
                                </button>
                                <button class="btn btn-danger btn-small" onclick="removeFromCart(${item.product.id})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                            ${item.product.hasWashing ? `
                                <div class="form-check" style="margin-top: 0.5rem;">
                                    <input type="checkbox" class="form-check-input" id="washing_${item.product.id}" 
                                           ${item.washing ? 'checked' : ''} 
                                           onchange="toggleItemWashing(${item.product.id})">
                                    <label class="form-label" for="washing_${item.product.id}" style="font-size: 0.9rem;">
                                        ØºØ³Ù„ Ø§Ù„Ù‚Ø§Øª (+100 Ø±ÙŠØ§Ù„)
                                    </label>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;
            }).join('');
            
            totalElement.textContent = total + ' Ø±ÙŠØ§Ù„';
        }

        // Update cart quantity
        function updateCartQuantity(productId, change) {
            const item = state.cart.find(item => item.product.id === productId);
            if (item) {
                item.quantity += change;
                if (item.quantity < 1) {
                    removeFromCart(productId);
                } else {
                    updateCartSidebar();
                    updateCartCount();
                }
            }
        }

        // Remove from cart
        function removeFromCart(productId) {
            state.cart = state.cart.filter(item => item.product.id !== productId);
            updateCartSidebar();
            updateCartCount();
        }

        // Toggle item washing option
        function toggleItemWashing(productId) {
            const item = state.cart.find(item => item.product.id === productId);
            if (item) {
                item.washing = !item.washing;
            }
        }

        // Checkout
        function checkout() {
            if (!state.currentUser) {
                showAuthModal();
                return;
            }
            
            if (state.cart.length === 0) {
                showError('Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚ ÙØ§Ø±ØºØ©');
                return;
            }
            
            // Calculate totals
            let subtotal = state.cart.reduce((sum, item) => sum + (item.product.price * item.quantity), 0);
            let washingPrice = state.cart.filter(item => item.washing).length * 100;
            let total = subtotal + washingPrice;
            
            // Update checkout modal
            document.getElementById('checkoutSubtotal').textContent = subtotal + ' Ø±ÙŠØ§Ù„';
            document.getElementById('washingPrice').textContent = washingPrice + ' Ø±ÙŠØ§Ù„';
            document.getElementById('checkoutTotal').textContent = total + ' Ø±ÙŠØ§Ù„';
            
            // Show checkout modal
            checkoutModal.style.display = 'flex';
        }

        // Toggle washing price
        function toggleWashingPrice() {
            const washingOption = document.getElementById('washingOption').checked;
            const subtotal = parseInt(document.getElementById('checkoutSubtotal').textContent);
            const washingPrice = washingOption ? state.cart.filter(item => item.product.hasWashing).length * 100 : 0;
            const total = subtotal + washingPrice;
            
            document.getElementById('washingPrice').textContent = washingPrice + ' Ø±ÙŠØ§Ù„';
            document.getElementById('checkoutTotal').textContent = total + ' Ø±ÙŠØ§Ù„';
        }

        // Confirm order
        function confirmOrder() {
            const address = document.getElementById('deliveryAddress').value;
            const paymentMethod = document.getElementById('paymentMethod').value;
            const washingOption = document.getElementById('washingOption').checked;
            
            if (!address.trim()) {
                showError('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙˆØµÙŠÙ„');
                return;
            }
            
            // Calculate totals
            let subtotal = state.cart.reduce((sum, item) => sum + (item.product.price * item.quantity), 0);
            let washingPrice = washingOption ? state.cart.filter(item => item.product.hasWashing).length * 100 : 0;
            let total = subtotal + washingPrice;
            
            // Check balance for internal payment
            if (paymentMethod === 'balance' && state.wallets.balance < total) {
                showError('Ø±ØµÙŠØ¯Ùƒ ØºÙŠØ± ÙƒØ§ÙÙŠ. ÙŠØ±Ø¬Ù‰ Ø´Ø­Ù† Ø§Ù„Ø±ØµÙŠØ¯');
                return;
            }
            
            // Process order
            const orderId = Math.floor(Math.random() * 90000) + 10000;
            const orderCode = 'QAT-' + orderId;
            
            // Deduct balance if using internal payment
            if (paymentMethod === 'balance') {
                state.wallets.balance -= total;
                document.getElementById('userBalance').textContent = state.wallets.balance + ' Ø±ÙŠØ§Ù„';
            }
            
            // Create order
            const order = {
                id: orderId,
                code: orderCode,
                userId: state.currentUser.id,
                items: [...state.cart],
                subtotal: subtotal,
                washingPrice: washingPrice,
                total: total,
                address: address,
                paymentMethod: paymentMethod,
                status: 'pending',
                date: new Date().toLocaleDateString('ar-SA'),
                washingRequired: washingOption
            };
            
            state.orders.unshift(order);
            
            // Clear cart
            state.cart = [];
            updateCartCount();
            updateCartSidebar();
            
            // Hide modals
            hideCheckoutModal();
            
            // Show success message
            const successMessage = `
                <div style="text-align: center;">
                    <h4>ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­!</h4>
                    <div style="background: var(--light); padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                        <div><strong>Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨:</strong> #${orderId}</div>
                        <div><strong>Ø±Ù…Ø² Ø§Ù„Ø·Ù„Ø¨:</strong> ${orderCode}</div>
                        <div><strong>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</strong> ${total} Ø±ÙŠØ§Ù„</div>
                    </div>
                    <p style="color: var(--gray);">Ø³ÙŠØªÙ… ØªÙˆØµÙŠÙ„ Ø·Ù„Ø¨Ùƒ Ø®Ù„Ø§Ù„ 60 Ø¯Ù‚ÙŠÙ‚Ø©</p>
                </div>
            `;
            
            showSuccessModal('Ø·Ù„Ø¨ Ù†Ø§Ø¬Ø­', successMessage);
            
            // Simulate notifications
            simulateOrderNotifications(order);
        }

        // Simulate order notifications
        function simulateOrderNotifications(order) {
            // Notification to seller
            setTimeout(() => {
                showSuccess('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø¥Ù„Ù‰ Ø§Ù„Ø¨Ø§Ø¦Ø¹');
            }, 1000);
            
            // Notification to washer
            setTimeout(() => {
                showSuccess('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¥Ù„Ù‰ Ù…ØºØ³Ù„Ø© Ø§Ù„Ù‚Ø§Øª');
            }, 3000);
            
            // Notification to driver
            setTimeout(() => {
                showSuccess('ØªÙ… ØªØ¹ÙŠÙŠÙ† Ù…Ù†Ø¯ÙˆØ¨ ØªÙˆØµÙŠÙ„ Ù„Ù„Ø·Ù„Ø¨');
            }, 5000);
            
            // Order confirmation
            setTimeout(() => {
                showSuccess('ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ ÙˆØªØ¬Ù‡ÙŠØ²Ù‡ Ù„Ù„ØªÙˆØµÙŠÙ„');
            }, 7000);
        }

        // Show wallet modal
        function showWalletModal() {
            if (!state.currentUser) {
                showAuthModal();
                return;
            }
            
            // Update balance display
            document.getElementById('currentBalance').textContent = state.wallets.balance + ' Ø±ÙŠØ§Ù„';
            
            // Update wallets list
            const walletsList = document.getElementById('walletsList');
            walletsList.innerHTML = `
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-wallet"></i></div>
                    <div class="stat-number">${state.wallets.jib}</div>
                    <div class="stat-title">Ø¬ÙŠØ¨</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-mobile-alt"></i></div>
                    <div class="stat-number">${state.wallets.jawaly}</div>
                    <div class="stat-title">Ø¬ÙˆØ§Ù„ÙŠ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-money-bill-wave"></i></div>
                    <div class="stat-number">${state.wallets.flousk}</div>
                    <div class="stat-title">ÙÙ„ÙˆØ³Ùƒ</div>
                </div>
            `;
            
            walletModal.style.display = 'flex';
            showWalletTab('balance');
        }

        // Show wallet tab
        function showWalletTab(tabName) {
            // Hide all tabs
            document.getElementById('balanceTab').style.display = 'none';
            document.getElementById('chargeTab').style.display = 'none';
            document.getElementById('withdrawTab').style.display = 'none';
            
            // Remove active class from all tabs
            document.querySelectorAll('#walletModal .tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName + 'Tab').style.display = 'block';
            
            // Add active class to selected tab
            document.querySelectorAll('#walletModal .tab').forEach(tab => {
                if (tab.textContent.includes(tabName === 'balance' ? 'Ø§Ù„Ø±ØµÙŠØ¯' : 
                                            tabName === 'charge' ? 'Ø´Ø­Ù†' : 'Ø³Ø­Ø¨')) {
                    tab.classList.add('active');
                }
            });
            
            // Reset forms
            document.getElementById('chargeAmount').value = '';
            document.getElementById('giftCode').value = '';
            document.getElementById('withdrawAmount').value = '';
            document.getElementById('withdrawPhone').value = '';
            document.getElementById('withdrawName').value = '';
        }

        // Toggle charge info
        function toggleChargeInfo() {
            const method = document.getElementById('chargeMethod').value;
            document.getElementById('transferInfo').style.display = method === 'transfer' ? 'block' : 'none';
            document.getElementById('giftCodeField').style.display = method === 'gift' ? 'block' : 'none';
        }

        // Charge wallet
        function chargeWallet() {
            const method = document.getElementById('chargeMethod').value;
            const amount = parseFloat(document.getElementById('chargeAmount').value);
            const giftCode = document.getElementById('giftCode').value;
            
            if (!amount || amount <= 0) {
                showError('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­');
                return;
            }
            
            if (method === 'gift' && !giftCode) {
                showError('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙˆØ¯ Ø§Ù„Ù‡Ø¯ÙŠØ©');
                return;
            }
            
            // Process charge
            state.wallets.balance += amount;
            document.getElementById('userBalance').textContent = state.wallets.balance + ' Ø±ÙŠØ§Ù„';
            document.getElementById('currentBalance').textContent = state.wallets.balance + ' Ø±ÙŠØ§Ù„';
            
            hideWalletModal();
            showSuccess(`ØªÙ… Ø´Ø­Ù† ${amount} Ø±ÙŠØ§Ù„ Ø¥Ù„Ù‰ Ø±ØµÙŠØ¯Ùƒ`);
        }

        // Withdraw balance
        function withdrawBalance() {
            const amount = parseFloat(document.getElementById('withdrawAmount').value);
            const walletType = document.getElementById('withdrawWalletType').value;
            const phone = document.getElementById('withdrawPhone').value;
            const name = document.getElementById('withdrawName').value;
            
            if (!amount || amount < 50) {
                showError('Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø³Ø­Ø¨ Ù‡Ùˆ 50 Ø±ÙŠØ§Ù„');
                return;
            }
            
            if (amount > state.wallets.balance) {
                showError('Ø±ØµÙŠØ¯Ùƒ ØºÙŠØ± ÙƒØ§ÙÙŠ');
                return;
            }
            
            if (!phone || !name) {
                showError('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');
                return;
            }
            
            // Process withdrawal
            state.wallets.balance -= amount;
            document.getElementById('userBalance').textContent = state.wallets.balance + ' Ø±ÙŠØ§Ù„';
            document.getElementById('currentBalance').textContent = state.wallets.balance + ' Ø±ÙŠØ§Ù„';
            
            hideWalletModal();
            showSuccess(`ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø³Ø­Ø¨ ${amount} Ø±ÙŠØ§Ù„. Ø³ÙŠØªÙ… Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø®Ù„Ø§Ù„ 24 Ø³Ø§Ø¹Ø©`);
        }

        // Auth functions
        function showAuthModal() {
            authModal.style.display = 'flex';
            showLoginForm();
        }

        function hideAuthModal() {
            authModal.style.display = 'none';
        }

        function showLoginForm() {
            document.getElementById('loginForm').style.display = 'block';
            document.getElementById('registerForm').style.display = 'none';
            document.getElementById('authTitle').textContent = 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„';
        }

        function showRegisterForm() {
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('registerForm').style.display = 'block';
            document.getElementById('authTitle').textContent = 'Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯';
            toggleUserFields();
        }

        function toggleUserFields() {
            const userType = document.getElementById('userType').value;
            document.getElementById('storeField').style.display = userType === 'seller' ? 'block' : 'none';
            document.getElementById('vehicleField').style.display = userType === 'driver' ? 'block' : 'none';
        }

        function login() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!email || !password) {
                showError('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
                return;
            }
            
            // Mock login - in real app, this would be an API call
            const mockUser = {
                id: 1,
                name: email.split('@')[0],
                email: email,
                phone: '771234567',
                type: email.includes('admin') ? 'admin' : 
                      email.includes('seller') ? 'seller' : 'buyer'
            };
            
            state.currentUser = mockUser;
            state.userType = mockUser.type;
            state.token = 'mock-token-' + Date.now();
            
            // Save to localStorage
            localStorage.setItem('token', state.token);
            localStorage.setItem('user', JSON.stringify(mockUser));
            
            hideAuthModal();
            updateUI();
            loadUserData();
            showSuccess('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­');
        }

        function register() {
            const name = document.getElementById('regName').value;
            const email = document.getElementById('regEmail').value;
            const phone = document.getElementById('regPhone').value;
            const password = document.getElementById('regPassword').value;
            const confirmPassword = document.getElementById('regConfirmPassword').value;
            const userType = document.getElementById('userType').value;
            
            if (!name || !email || !phone || !password || !confirmPassword) {
                showError('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„');
                return;
            }
            
            if (password !== confirmPassword) {
                showError('ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚Ø©');
                return;
            }
            
            if (phone.length !== 9) {
                showError('Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 9 Ø£Ø±Ù‚Ø§Ù…');
                return;
            }
            
            // Mock registration
            const mockUser = {
                id: Math.floor(Math.random() * 10000) + 1000,
                name: name,
                email: email,
                phone: phone,
                type: userType
            };
            
            if (userType === 'seller') {
                mockUser.storeName = document.getElementById('storeName').value;
            }
            
            if (userType === 'driver') {
                mockUser.vehicleType = document.getElementById('vehicleType').value;
            }
            
            state.currentUser = mockUser;
            state.userType = userType;
            state.token = 'mock-token-' + Date.now();
            
            // Save to localStorage
            localStorage.setItem('token', state.token);
            localStorage.setItem('user', JSON.stringify(mockUser));
            
            hideAuthModal();
            updateUI();
            loadUserData();
            showSuccess('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­');
        }

        function logout() {
            state.currentUser = null;
            state.token = null;
            state.userType = null;
            state.cart = [];
            
            localStorage.removeItem('token');
            localStorage.removeItem('user');
            
            updateCartCount();
            document.getElementById('userMenu').innerHTML = `
                <button class="btn btn-primary" onclick="showAuthModal()">
                    <i class="fas fa-user"></i> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
                </button>
            `;
            
            // Reset navigation
            const navMenu = document.querySelector('.nav-menu');
            navMenu.innerHTML = `
                <li><a href="#" onclick="showSection('home'); return false;" class="active">
                    <i class="fas fa-home"></i> Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                </a></li>
                <li><a href="#" onclick="showSection('products'); return false;">
                    <i class="fas fa-store"></i> Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
                </a></li>
                <li><a href="#" onclick="showSection('markets'); return false;">
                    <i class="fas fa-shopping-cart"></i> Ø§Ù„Ø£Ø³ÙˆØ§Ù‚
                </a></li>
                <li><a href="#" onclick="showSection('washers'); return false;">
                    <i class="fas fa-soap"></i> Ù…ØºØ§Ø³Ù„ Ø§Ù„Ù‚Ø§Øª
                </a></li>
                <li><a href="#" onclick="showSection('packages'); return false;">
                    <i class="fas fa-gift"></i> Ø§Ù„Ø¨Ø§Ù‚Ø§Øª Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†ÙŠØ©
                </a></li>
            `;
            
            showSection('home');
            showSuccess('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­');
        }

        // Modal functions
        function hideCheckoutModal() {
            checkoutModal.style.display = 'none';
        }

        function hideWalletModal() {
            walletModal.style.display = 'none';
        }

        function showSuccessModal(title, message) {
            document.getElementById('successTitle').textContent = title;
            document.getElementById('successMessage').innerHTML = message;
            successModal.style.display = 'flex';
        }

        function hideSuccessModal() {
            successModal.style.display = 'none';
        }

        // Admin functions
        function showAdminTab(tabName) {
            const content = document.getElementById('adminContent');
            
            switch(tabName) {
                case 'dashboard':
                    content.innerHTML = `
                        <h2><i class="fas fa-tachometer-alt"></i> Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø¯ÙŠØ±</h2>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon"><i class="fas fa-users"></i></div>
                                <div class="stat-number">${Math.floor(Math.random() * 1000) + 500}</div>
                                <div class="stat-title">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon"><i class="fas fa-shopping-cart"></i></div>
                                <div class="stat-number">${Math.floor(Math.random() * 5000) + 1000}</div>
                                <div class="stat-title">Ø§Ù„Ø·Ù„Ø¨Ø§Øª</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon"><i class="fas fa-money-bill-wave"></i></div>
                                <div class="stat-number">${Math.floor(Math.random() * 100000) + 50000}</div>
                                <div class="stat-title">Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon"><i class="fas fa-chart-line"></i></div>
                                <div class="stat-number">${Math.floor(Math.random() * 100)}%</div>
                                <div class="stat-title">Ø§Ù„Ù†Ù…Ùˆ</div>
                            </div>
                        </div>
                        
                        <h3 style="margin: 2rem 0 1rem;">Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„ÙƒØ§Ù…Ù„</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1rem;">
                            <button class="btn btn-primary" onclick="exportDatabase()">
                                <i class="fas fa-download"></i> Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠ
                            </button>
                            <button class="btn btn-secondary" onclick="manageBackups()">
                                <i class="fas fa-database"></i> Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ø³Ø®
                            </button>
                            <button class="btn btn-outline" onclick="showAdminTab('settings')">
                                <i class="fas fa-paint-brush"></i> ØªØ®ØµÙŠØµ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
                            </button>
                            <button class="btn btn-outline" onclick="showAdminTab('users')">
                                <i class="fas fa-user-cog"></i> ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
                            </button>
                        </div>
                    `;
                    break;
                    
                case 'markets':
                    content.innerHTML = `
                        <h2><i class="fas fa-store"></i> Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø³ÙˆØ§Ù‚</h2>
                        <button class="btn btn-primary" onclick="addMarket()" style="margin-bottom: 1rem;">
                            <i class="fas fa-plus"></i> Ø¥Ø¶Ø§ÙØ© Ø³ÙˆÙ‚ Ø¬Ø¯ÙŠØ¯
                        </button>
                        <div class="orders-table">
                            <div class="order-row order-header">
                                <div>Ø§Ù„Ø§Ø³Ù…</div>
                                <div>Ø§Ù„Ù…ÙˆÙ‚Ø¹</div>
                                <div>Ø§Ù„Ù…ØºØ§Ø³Ù„</div>
                                <div>Ø§Ù„Ø¨Ø§Ø¦Ø¹ÙˆÙ†</div>
                                <div>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</div>
                            </div>
                            ${state.markets.map(market => `
                                <div class="order-row">
                                    <div>${market.name}</div>
                                    <div>${market.location}</div>
                                    <div>${market.washers}</div>
                                    <div>${Math.floor(Math.random() * 20) + 5}</div>
                                    <div>
                                        <button class="btn btn-outline btn-small" onclick="editMarket(${market.id})">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-danger btn-small" onclick="deleteMarket(${market.id})">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    `;
                    break;
                    
                case 'washers':
                    content.innerHTML = `
                        <h2><i class="fas fa-soap"></i> Ø¥Ø¯Ø§Ø±Ø© Ù…ØºØ§Ø³Ù„ Ø§Ù„Ù‚Ø§Øª</h2>
                        <button class="btn btn-primary" onclick="addWasher()" style="margin-bottom: 1rem;">
                            <i class="fas fa-plus"></i> Ø¥Ø¶Ø§ÙØ© Ù…ØºØ³Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©
                        </button>
                        <div class="orders-table">
                            <div class="order-row order-header">
                                <div>Ø§Ù„Ø§Ø³Ù…</div>
                                <div>Ø§Ù„Ø³ÙˆÙ‚</div>
                                <div>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</div>
                                <div>Ø§Ù„Ø­Ø§Ù„Ø©</div>
                                <div>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</div>
                            </div>
                            ${state.washers.map(washer => {
                                const market = state.markets.find(m => m.id === washer.marketId);
                                return `
                                    <div class="order-row">
                                        <div>${washer.name}</div>
                                        <div>${market ? market.name : 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}</div>
                                        <div>${washer.phone}</div>
                                        <div><span class="order-status status-delivering">Ù†Ø´Ø·</span></div>
                                        <div>
                                            <button class="btn btn-outline btn-small" onclick="editWasher(${washer.id})">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="btn btn-danger btn-small" onclick="deleteWasher(${washer.id})">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    `;
                    break;
                    
                case 'drivers':
                    content.innerHTML = `
                        <h2><i class="fas fa-truck"></i> Ø¥Ø¯Ø§Ø±Ø© Ù…Ù†Ø¯ÙˆØ¨ÙŠ Ø§Ù„ØªÙˆØµÙŠÙ„</h2>
                        <button class="btn btn-primary" onclick="addDriver()" style="margin-bottom: 1rem;">
                            <i class="fas fa-plus"></i> Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø¯ÙˆØ¨ Ø¬Ø¯ÙŠØ¯
                        </button>
                        <div class="orders-table">
                            <div class="order-row order-header">
                                <div>Ø§Ù„Ø§Ø³Ù…</div>
                                <div>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</div>
                                <div>Ø§Ù„Ù…Ø±ÙƒØ¨Ø©</div>
                                <div>Ø§Ù„Ø­Ø§Ù„Ø©</div>
                                <div>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</div>
                            </div>
                            ${state.drivers.map(driver => `
                                <div class="order-row">
                                    <div>${driver.name}</div>
                                    <div>${driver.phone}</div>
                                    <div>${driver.vehicle === 'motorcycle' ? 'Ø¯Ø±Ø§Ø¬Ø© Ù†Ø§Ø±ÙŠØ©' : 'Ø³ÙŠØ§Ø±Ø©'}</div>
                                    <div><span class="order-status status-delivered">${driver.status === 'available' ? 'Ù…ØªØ§Ø­' : 'Ù…Ø´ØºÙˆÙ„'}</span></div>
                                    <div>
                                        <button class="btn btn-outline btn-small" onclick="editDriver(${driver.id})">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-danger btn-small" onclick="deleteDriver(${driver.id})">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    `;
                    break;
                    
                case 'advertisements':
                    content.innerHTML = `
                        <h2><i class="fas fa-bullhorn"></i> Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª</h2>
                        <div style="display: flex; gap: 1rem; margin-bottom: 1rem;">
                            <button class="btn btn-primary" onclick="addAdvertisement()">
                                <i class="fas fa-plus"></i> Ø¥Ø¹Ù„Ø§Ù† Ø¬Ø¯ÙŠØ¯
                            </button>
                            <button class="btn btn-secondary" onclick="showAdminTab('packages')">
                                <i class="fas fa-gift"></i> Ø§Ù„Ø¨Ø§Ù‚Ø§Øª Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†ÙŠØ©
                            </button>
                        </div>
                        <div class="products-grid">
                            ${state.advertisements.map(ad => `
                                <div class="product-card">
                                    <div class="product-image" style="background: linear-gradient(135deg, var(--accent), #1976D2); color: white; font-size: 3rem;">
                                        <i class="fas fa-bullhorn"></i>
                                    </div>
                                    <div class="product-info">
                                        <div class="product-title">${ad.title}</div>
                                        <div class="product-description">${ad.content}</div>
                                        <div class="product-price">Ø¥Ø¹Ù„Ø§Ù† ${ad.type === 'home' ? 'Ø±Ø¦ÙŠØ³ÙŠ' : 'Ø¹Ø§Ø¯ÙŠ'}</div>
                                        <div style="display: flex; gap: 0.5rem;">
                                            <button class="btn btn-outline btn-small" onclick="editAdvertisement(${ad.id})">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="btn btn-danger btn-small" onclick="deleteAdvertisement(${ad.id})">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    `;
                    break;
                    
                case 'packages':
                    content.innerHTML = `
                        <h2><i class="fas fa-gift"></i> Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨Ø§Ù‚Ø§Øª Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†ÙŠØ©</h2>
                        <button class="btn btn-primary" onclick="addPackage()" style="margin-bottom: 1rem;">
                            <i class="fas fa-plus"></i> Ø¥Ø¶Ø§ÙØ© Ø¨Ø§Ù‚Ø© Ø¬Ø¯ÙŠØ¯Ø©
                        </button>
                        <div class="products-grid">
                            ${state.packages.map(pkg => `
                                <div class="product-card">
                                    <div class="product-badge">Ø¨Ø§Ù‚Ø©</div>
                                    <div class="product-image" style="background: linear-gradient(135deg, var(--secondary), var(--secondary-dark)); color: white; font-size: 3rem;">
                                        <i class="fas fa-crown"></i>
                                    </div>
                                    <div class="product-info">
                                        <div class="product-title">${pkg.name}</div>
                                        <div class="product-description">
                                            ${pkg.features.map(f => `<div><i class="fas fa-check" style="color: var(--success);"></i> ${f}</div>`).join('')}
                                        </div>
                                        <div class="product-price">${pkg.price} Ø±ÙŠØ§Ù„</div>
                                        <div style="color: var(--gray); font-size: 0.9rem; margin-bottom: 1rem;">Ù…Ø¯Ø© ${pkg.duration} ÙŠÙˆÙ…</div>
                                        <div style="display: flex; gap: 0.5rem;">
                                            <button class="btn btn-outline btn-small" onclick="editPackage(${pkg.id})">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="btn btn-danger btn-small" onclick="deletePackage(${pkg.id})">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    `;
                    break;
                    
                case 'users':
                    content.innerHTML = `
                        <h2><i class="fas fa-users"></i> Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h2>
                        <div class="orders-table">
                            <div class="order-row order-header">
                                <div>Ø§Ù„Ø§Ø³Ù…</div>
                                <div>Ø§Ù„Ø¨Ø±ÙŠØ¯</div>
                                <div>Ø§Ù„Ù†ÙˆØ¹</div>
                                <div>Ø§Ù„Ø­Ø§Ù„Ø©</div>
                                <div>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</div>
                            </div>
                            <div class="order-row">
                                <div>ÙŠÙˆØ³Ù Ù…Ø­Ù…Ø¯</div>
                                <div>admin@qat.com</div>
                                <div><span class="badge">Ù…Ø¯ÙŠØ±</span></div>
                                <div><span class="order-status status-delivered">Ù†Ø´Ø·</span></div>
                                <div>
                                    <button class="btn btn-outline btn-small">
                                        <i class="fas fa-key"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="order-row">
                                <div>Ø£Ø­Ù…Ø¯ Ø§Ù„Ø¨Ø§Ø¦Ø¹</div>
                                <div>seller@qat.com</div>
                                <div><span style="background: var(--primary-light); color: white; padding: 0.2rem 0.5rem; border-radius: 4px;">Ø¨Ø§Ø¦Ø¹</span></div>
                                <div><span class="order-status status-delivered">Ù†Ø´Ø·</span></div>
                                <div>
                                    <button class="btn btn-outline btn-small">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-danger btn-small">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'settings':
                    content.innerHTML = `
                        <h2><i class="fas fa-cog"></i> Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</h2>
                        <div style="background: white; padding: 2rem; border-radius: 10px; box-shadow: var(--card-shadow);">
                            <h3 style="margin-bottom: 1rem;">ØªØ®ØµÙŠØµ Ø§Ù„Ù…Ø¸Ù‡Ø±</h3>
                            <div class="form-group">
                                <label class="form-label">Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</label>
                                <input type="color" class="form-control" value="#2E7D32" style="height: 40px;">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Ø´Ø¹Ø§Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</label>
                                <input type="file" class="form-control" accept="image/*">
                            </div>
                            <button class="btn btn-primary">Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª</button>
                        </div>
                    `;
                    break;
            }
        }

        // Export database
        function exportDatabase() {
            const data = {
                users: [state.currentUser],
                products: state.products,
                markets: state.markets,
                washers: state.washers,
                drivers: state.drivers,
                orders: state.orders,
                advertisements: state.advertisements,
                packages: state.packages,
                exportDate: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `qat-backup-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showSuccess('ØªÙ… ØªØµØ¯ÙŠØ± Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­');
        }

        // Utility functions
        function showSuccess(message) {
            const alert = document.createElement('div');
            alert.className = 'alert alert-success';
            alert.innerHTML = `<i class="fas fa-check-circle"></i> ${message}`;
            alert.style.position = 'fixed';
            alert.style.top = '100px';
            alert.style.right = '20px';
            alert.style.zIndex = '9999';
            alert.style.minWidth = '300px';
            
            document.body.appendChild(alert);
            
            setTimeout(() => {
                alert.remove();
            }, 3000);
        }

        function showError(message) {
            const alert = document.createElement('div');
            alert.className = 'alert alert-error';
            alert.innerHTML = `<i class="fas fa-exclamation-circle"></i> ${message}`;
            alert.style.position = 'fixed';
            alert.style.top = '100px';
            alert.style.right = '20px';
            alert.style.zIndex = '9999';
            alert.style.minWidth = '300px';
            
            document.body.appendChild(alert);
            
            setTimeout(() => {
                alert.remove();
            }, 3000);
        }

        // Close modals when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
            }
        };
    </script>
</body>
</html>
